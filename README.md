# Crypto Archive

Crypto Archive is a module that makes it easy to handle encryption and decryption of files in the browser.

This package is primaraly built to be used in the context of sharing/sending files via a storage provider such as Amazon S3, Backblaze B2, Cloudflare R2 etc.


## Usage

```js

import Archiver from "crypto-archive"

const max_upload_size = 100 * 1024 * 1024
const max_number_of_files = 10

const archiver = new Archiver(max_upload_size, max_number_of_files)

```

```js
// addFiles()

const files = someInputTypeUpload.files

archiver.addFiles(files)

```

```js
// removeFile()

archiver.removeFile(file)

```

```js
// encrypt()

const password = "1234"

const callback = (progress) => {
    // Do something with the progress
    console.log(progress)
}

// If password is null a random password will be generated
const data = await archiver.encrypt(password, callback)

// data {
//     blob,
//     fileName,
//     password,
//     metadata
// }

```

```js
// decrypt()

const data = {
    blob, // encrypted blob that is generated by the encrypt() function
    fileName: "encrypted-archive.zip",
    password: "1234",
    metadata, // base64 encoded and encrypted metadata that is generated by the encrypt() function
}

const callback = (progress) => {
    // Do something with the progress
    console.log(progress)
}

archiver.decrypt(blob.stream(), data.metadata, data.password, callback)

```


